#: import FadeTransition kivy.uix.screenmanager.FadeTransition
#: import ListAdapter kivy.adapters.listadapter.ListAdapter
#: import ListItemButton kivy.uix.listview.ListItemButton

ScreenManagement:
    transition: FadeTransition()
    MainScreen:
    POSScreen:
    PaymentScreen:
    CustomerScreen:

<MainScreen>:
    name: "main"
    canvas.before:
        Color:
            rgba: 0.6, 0.6, 0.6, 1
        Rectangle:
            pos: self.pos
            size: self.size
    TextInput:
        id: main_username
        text: 'admin'
        write_tab: False
        multiline: False
        on_text_validate: app.root.current = "posscreen"
        size_hint: .3, .1
        pos: (root.right - self.width) / 2, ((root.top - self.height) / 2) + self.height
    Button:
        on_release: app.root.current = "posscreen"
        text: "Start session"
        size_hint: .3, .1
        pos: (root.right - self.width) / 2, (root.top - self.height) / 2

<PaymentScreen>:
    name: "paymentscreen"
    canvas.before:
        Color:
            rgba: 0.6, 0.6, 0.6, 1
        Rectangle:
            pos: self.pos
            size: self.size
    Label:
        id: main_username
        text: 'Amount'
        size_hint: .3, .1
        pos: (root.right - self.width) / 2, ((root.top - self.height) / 2) + self.height
    Button:
        on_release: app.root.current = "posscreen"
        text: "Back"
        size_hint: .3, .1
        pos: (root.right - self.width) / 2, (root.top - self.height) / 2 + 2*self.height
    Button:
        on_release: self.parent.pay()
        text: "Cash Payment"
        size_hint: .3, .1
        pos: (root.right - self.width) / 2, (root.top - self.height) / 2

<CustomerScreen>:
    label_wid: main_customer
    customer_list_wid: my_stack_layout

    name: "customerscreen"
    canvas.before:
        Color:
            rgba: 0.6, 0.6, 0.6, 1
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        padding: 0
        BoxLayout:
            id: customer_boxlayout
            cols: 3
            spacing: 10
            size_hint: 1, 0.1
            Button:
                on_release: app.root.current = "posscreen"
                text: "Set"
                size_hint: .1, 1
            Label:
                id: main_customer
                text: 'default (0)'
                size_hint: .8, 1
            Button:
                on_release: app.root.current = "posscreen"
                text: "Back"
                size_hint: .1, 1
        StackLayout:
            id: my_stack_layout
            orientation: 'lr-tb'


<ListItemButton>:
    on_press: app.root.get_screen('posscreen').selection_change(*args)

<POSScreen>:
    name: "posscreen"
    canvas.before:
        Color:
            rgba: 0.6, 0.6, 0.6, 1
        Rectangle:
            pos: self.pos
            size: self.size

    label_wid: my_custom_label
    scroll_view_wid: my_scroll_view
    grid_layout_wid: my_grid_layout
    text_input_wid: my_search_textinput
    tabbed_panel_wid: my_tabbed_panel
    scroll_view_wid: my_payslip_scroll_view
    list_view_wid: my_payslip_list

    BoxLayout:
        orientation: 'horizontal'
        padding: 0

        BoxLayout:
            orientation: 'vertical'
            padding: 0

            BoxLayout:
                orientation: 'horizontal'
                padding: 1
                size_hint: 1, .1
                Image:
                    source: 'logo.png'
                    size_hint: 0.2, 1
                Button:
                    on_release: app.root.current = "main"
                    text: "Close session"
                    font_size: 10
                    size_hint: 0.2, 1
                Label:
                    id: my_custom_label
                    text: 'My label before button press'
                    size_hint: 0.6, 1
            ScrollView:
                id: my_payslip_scroll_view
                text: 'items in list'
                size_hint: 1, .6
                ListView:
                    id: my_payslip_list
                    size_hint_y: .8
                    adapter:
                        ListAdapter(data=root.my_data,
                        selection_mode='single',
                        allow_empty_selection=False,
                        cls=ListItemButton)
                    canvas.before:
                        Color:
                            rgb: 1,.5,0
                        Rectangle:
                            pos: self.pos
                            size: self.size
            Label:
                size_hint_y: .1
                canvas.before:
                    Color:
                        rgb: 0,.5,1
                    Rectangle:
                        pos: self.pos
                        size: self.size
                text: root.selected_value
            BoxLayout:
                orientation: 'horizontal'
                padding: 1
                size_hint: 1, .3

                BoxLayout:
                    orientation: 'vertical'
                    padding: 1
                    Button:
                        text: 'Customer'
                        size_hint: 1, .2
                        on_release: app.root.current = "customerscreen"
                    Button:
                        text: 'Payment'
                        size_hint: 1, .8
                        on_release: app.root.current = "paymentscreen"

                BoxLayout:
                    orientation: 'vertical'
                    padding: 1
                    BoxLayout:
                        orientation: 'horizontal'
                        padding: 1
                        Button:
                            text: '1'
                            size_hint: .25, 1
                            on_release: root.do_action()
                        Button:
                            text: '2'
                            size_hint: .25, 1
                            on_release: root.do_action()
                        Button:
                            text: '3'
                            size_hint: .25, 1
                            on_release: root.do_action()
                        Button:
                            text: 'Qty'
                            size_hint: .25, 1
                            on_release: root.do_action()
                    BoxLayout:
                        orientation: 'horizontal'
                        padding: 1
                        Button:
                            text: '4'
                            size_hint: .25, 1
                            on_release: root.do_action()
                        Button:
                            text: '5'
                            size_hint: .25, 1
                            on_release: root.do_action()
                        Button:
                            text: '6'
                            size_hint: .25, 1
                            on_release: root.do_action()
                        Button:
                            text: 'Disc'
                            size_hint: .25, 1
                            on_release: root.do_action()
                    BoxLayout:
                        orientation: 'horizontal'
                        padding: 1
                        Button:
                            text: '7'
                            size_hint: .25, 1
                            on_release: root.do_action()
                        Button:
                            text: '8'
                            size_hint: .25, 1
                            on_release: root.do_action()
                        Button:
                            text: '9'
                            size_hint: .25, 1
                            on_release: root.do_action()
                        Button:
                            text: 'Price'
                            size_hint: .25, 1
                            on_release: root.do_action()
                    BoxLayout:
                        orientation: 'horizontal'
                        padding: 1
                        Button:
                            text: '+/-'
                            size_hint: .25, 1
                            on_release: root.do_action()
                        Button:
                            text: '0'
                            size_hint: .25, 1
                            on_release: root.do_action()
                        Button:
                            text: '.'
                            size_hint: .25, 1
                            on_release: root.do_action()
                        Button:
                            text: 'Del'
                            size_hint: .25, 1
                            on_release: root.do_action()


        BoxLayout:
            orientation: 'vertical'
            padding: 0

            TabbedPanel:
                id: my_tabbed_panel
                size_hint: 1, .1
                do_default_tab: False
                TabbedPanelItem:
                    size_hint: 0.2, 1
                    text: '1'
                TabbedPanelItem:
                    size_hint: 0.2, 1
                    text: '+'
                TabbedPanelItem:
                    size_hint: 0.2, 1
                    text: '-'
            TextInput:
                id: my_search_textinput
                text: ''
                multiline: False
                size_hint: 1, .1
                on_text_validate: root.do_search()
            ScrollView:
                id: my_scroll_view
                text: 'My label before button press'
                size_hint: 1, 0.8
                GridLayout:
                    id: my_grid_layout
                    cols: 4
                    spacing: 10
                    size_hint_y: None
